# CSS

## CSS 基础

### 什么是 CSS？

> 和 HTML 类似，CSS 不是编程语言。它也不是标记语言，而是一门样式表语言。CSS 用于选择性地为 HTML 元素添加样式。

#### CSS 规则集详解

- 选择器（Selector）

    > HTML 元素名位于规则集的开头。它定义了需要添加样式的元素。要给不同的元素添加样式，只需要更改选择器。

- 声明（Declaration）

    > 它是一条单独的规则（如 color: red;）。用来指定为元素的哪个属性添加样式。

- 属性（Properties）

    > 它是为 HTML 元素添加样式的方式。在 CSS 中，你可以选择要在规则中影响的属性。

- 属性值（Property value）

    > 位于属性的右边，冒号后面即属性值。它从指定属性的可选值中选择一个值。

> 注意其他重要的语法：

- 除了选择器部分，每个规则集都应该包含在成对的大括号里（{}）。

- 在每个声明里要用冒号（:）将属性与属性值分隔开。

- 在每个规则集里要用分号（;）将各个声明分隔开。

### CSS：一切皆盒子

> 编写 CSS 时你会发现，所有的一切都与盒子相关——设置尺寸、颜色、位置，等等。页面上大部分 HTML 元素都可以被看作若干堆叠的盒子。

## CSS 如何运行

### CSS 究竟是怎么工作的？

> 当浏览器展示一个文件的时候，它必须兼顾文件的内容和文件的样式信息，下面我们会了解到它处理文件的标准的流程。需要知道的是，下面的步骤是浏览加载网页的简化版本，而且不同的浏览器在处理文件的时候会有不同的方式，但是下面的步骤基本都会出现。

1. 浏览器载入 HTML 文件（比如从网络上获取）。

2. 将 HTML 文件转化成一个 DOM（Document Object Model），DOM 是文件在计算机内存中的表现形式，下一节将更加详细的解释 DOM。

3. 接下来，浏览器会拉取该 HTML 相关的大部分资源，比如嵌入到页面的图片、视频和 CSS 样式。JavaScript 则会稍后进行处理，简单起见，同时此节主讲 CSS，所以这里对如何加载 JavaScript 不会展开叙述。

4. 浏览器拉取到 CSS 之后会进行解析，根据选择器的不同类型（比如 element、class、id 等等）把他们分到不同的“桶”中。浏览器基于它找到的不同的选择器，将不同的规则（基于选择器的规则，如元素选择器、类选择器、id 选择器等）应用在对应的 DOM 的节点中，并添加节点依赖的样式（这个中间步骤称为渲染树）。

5. 上述的规则应用于渲染树之后，渲染树会依照应该出现的结构进行布局。

6. 网页展示在屏幕上（这一步被称为着色）。

### 关于 DOM

> 一个 DOM 有一个树形结构，标记语言中的每一个元素、属性以及每一段文字都对应着结构树中的一个节点（Node/DOM 或 DOM node）。节点由节点本身和其他 DOM 节点的关系定义，有些节点有父节点，有些节点有兄弟节点（同级节点）。

## CSS 选择器

### 选择器是什么？

> CSS 选择器是 CSS 规则的第一部分。它是元素和其他部分组合起来告诉浏览器哪个 HTML 元素应当是被选为应用规则中的 CSS 属性值的方式。选择器所选择的元素，叫做“选择器的对象”。

### 选择器列表

> 如果你有多个使用相同样式的 CSS 选择器，那么这些单独的选择器可以被混编为一个“选择器列表”，这样，规则就可以应用到所有的单个选择器上了。
>
> 当你使用选择器列表时，如果任何一个选择器无效 (存在语法错误)，那么整条规则都会被忽略。

### 选择器的种类

#### 类型、类和 ID 选择器

> CSS 选择器是用于选择页面上的 HTML 元素以便对其应用样式的工具。
>
> 元素选择器:

```css
h1 {
}
```

> 类选择器：

```css
.box {
}
```

> id 选择器：

```css
#unique {
}
```

#### 标签属性选择器

> 根据一个元素上的某个标签的属性的存在以选择元素的不同方式：

```css
a[title] {
}
```

> 或者根据一个有特定值的标签属性是否存在来选择：

```css
a[href="https://example.com"]
{
}
```

#### 伪类与伪元素

> 包含了伪类，用来样式化一个元素的特定状态。

```css
a:hover {
}
```

> 还可以包含了伪元素，选择一个元素的某个部分而不是元素自己。

```css
p::first-line {
}
```

#### 运算符

> 可以将其他选择器组合起来，更复杂的选择元素。下面的示例用运算符（>）选择了 `<article>` 元素的初代子元素。

```css
article > p {
}
```

## 属性选择器

### 存否和值选择器

> 允许基于一个元素自身是否存在（例如href）或者基于各式不同的按属性值的匹配，来选取元素。

| 选择器 | 示例 | 描述 |
| :-: | :-: | :-: |
| [attr] | a[title] | 匹配带有一个名为attr的属性的元素——方括号里的值。 |
| [attr=value] | a[href="https://example.com"] | 匹配带有一个名为attr的属性的元素，其值正为value——引号中的字符串。 |
| [attr~=value] | p[class~="special"] | 匹配带有一个名为attr的属性的元素，其值正为value，或者匹配带有一个attr属性的元素，其值有一个或者更多，至少有一个和value匹配。注意，在一列中的好几个值，是用空格隔开的。|
| [attr\|=value] | div[lang\|="zh"] | 匹配带有一个名为attr的属性的元素，其值可正为value，或者开始为value，后面紧随着一个连字符。 |

### 子字符串匹配选择器

> 这些选择器让更高级的属性的值的子字符串的匹配变得可行。

| 选择器 | 示例 | 描述 |
| :-: | :-: | :-: |
| [attr^=value] | li[class^="box-"] | 匹配带有一个名为attr的属性的元素，其值开头为value子字符串。 |
| [attr$=value] | li[class$="-box"] | 匹配带有一个名为attr的属性的元素，其值结尾为value子字符串 |
| [attr*=value] | li[class*="box"] | 匹配带有一个名为attr的属性的元素，其值的字符串中的任何地方，至少出现了一次value子字符串。 |

### 大小写敏感

> 如果你想在大小写不敏感的情况下，匹配属性值的话，你可以在闭合括号之前，使用 `i` 值。

## 伪类和伪元素

### 什么是伪类？

> 伪类是选择器的一种，它用于选择处于特定状态的元素，比如当它们是这一类型的第一个元素时，或者是当鼠标指针悬浮在元素上面的时候。它们表现得会像是你向你的文档的某个部分应用了一个类一样，帮你在你的标记文本中减少多余的类，让你的代码更灵活、更易于维护。
>
> 伪类就是开头为冒号的关键字。例如，`:hover` 就是一个伪类。

#### 用户行为伪类

> 一些伪类只会在用户以某种方式和文档交互的时候应用。这些用户行为伪类，有时叫做动态伪类，表现得就像是一个类在用户和元素交互的时候加到了元素上一样。

### 伪元素是啥？

> 伪元素以类似方式表现。不过表现得是像你往标记文本中加入全新的 HTML 元素一样，而不是向现有的元素上应用类。
>
> 伪元素开头为双冒号 `::`。比如，`::before` 就是一个伪元素的示例。

## 关系选择器

### 后代选择器

> 后代选择器——典型用单个空格（" "）字符——组合两个选择器，比如，第二个选择器匹配的元素被选择，如果他们有一个祖先（父亲，父亲的父亲，父亲的父亲的父亲，等等）元素匹配第一个选择器。选择器利用后代组合符被称作后代选择器。

```css
body article p
```

### 子代关系选择器

> 子代关系选择器是个大于号（`>`），只会在选择器选中直接子元素的时候匹配。继承关系上更远的后代则不会匹配。例如，只选中作为 `<article>` 的直接子元素的 `<p>` 元素：

```css
article > p
```

### 邻接兄弟

> 邻接兄弟选择器（`+`）用来选中恰好处于另一个在继承关系上同级的元素旁边的物件。例如，选中所有紧随 `<p>` 元素之后的 `<img>` 元素：

```css
p + img
```

### 通用兄弟

> 如果你想选中一个元素的兄弟元素，即使它们不直接相邻，你还是可以使用通用兄弟关系选择器（`~`）。要选中所有的 `<p>` 元素后任何地方的 `<img>` 元素，我们会这样做：

```css
p ~ img
```

## 盒模型

### 区块盒子与行内盒子

> 在 CSS 中，我们有几种类型的盒子，一般分为**区块盒子**（block boxes）和**行内盒子**（inline boxes）。类型指的是盒子在页面流中的行为方式以及与页面上其他盒子的关系。盒子有**内部显示**（inner display type）和**外部显示**（outer display type）两种类型。

### 外部显示类型

> 一个拥有 `block` 外部显示类型的盒子会表现出以下行为：

- 盒子会产生换行。

- `width` 和 `height` 属性可以发挥作用。

- 内边距、外边距和边框会将其他元素从当前盒子周围“推开”。

- 如果未指定 `width`，方框将沿行向扩展，以填充其容器中的可用空间。在大多数情况下，盒子会变得与其容器一样宽，占据可用空间的 100%。

> 一个拥有 `inline` 外部显示类型的盒子会表现出以下行为：

- 盒子不会产生换行。

- `width` 和 `height` 属性将不起作用。

- 垂直方向的内边距、外边距以及边框会被应用但是不会把其他处于 `inline` 状态的盒子推开。

- 水平方向的内边距、外边距以及边框会被应用且会把其他处于 `inline` 状态的盒子推开。

### 内部显示类型

> 盒子还有内部显示类型，它决定了盒子内元素的布局方式。

### 什么是 CSS 盒模型？

> CSS 盒模型整体上适用于区块盒子，它定义了盒子的不同部分（外边距、边框、内边距和内容）如何协同工作，以创建一个在页面上可以看到的盒子。行内盒子使用的只是盒模型中定义的部分行为。

#### 盒模型的各个部分

- 内容盒子：显示内容的区域；使用 `inline-size` 和 `block-size` 或 `width` 和 `height` 等属性确定其大小。

- 内边距盒子：填充位于内容周围的空白处；使用 `padding` 和相关属性确定其大小。

- 边框盒子：边框盒子包住内容和任何填充；使用 `border` 和相关属性确定其大小。

- 外边距盒子：外边距是最外层，其包裹内容、内边距和边框，作为该盒子与其他元素之间的空白；使用 `margin` 和相关属性确定其大小。

#### CSS 标准盒模型

> 宽度和高度属性仅应用于内容区域（content box）本身，不包括内边距（padding）、边框（border）和外边距（margin）。

#### CSS 替代盒模型

> 宽度和高度属性包括了内容区域、内边距和边框的总和。
>
> 在替代盒模型中，任何宽度都是页面上可见方框的宽度。
>
> 要在所有元素中使用替代方框模型（这是开发人员的常见选择），请在 `<html>` 元素上设置 box-sizing 属性，并将所有其他元素设置为继承该值：

```css
html {
  box-sizing: border-box;
}

*,
*::before,
*::after {
  box-sizing: inherit;
}
```

### 外边距、内边距和边框

#### 外边距

> 外边距是盒子周围一圈看不到的空间。它会把其他元素退推离盒子。无论使用标准模型还是替代模型，外边距总是在计算可见部分后额外添加。

**外边距折叠：**

- 两个正外边距将合并为一个外边距。其大小等于最大的单个外边距。

- 两个负外边距会折叠，并使用最小（离零最远）的值。

- 如果其中一个外边距为负值，其值将从总值中减去。

#### 边框

> 边框是在边距和填充盒子之间绘制的。如果你正在使用标准的盒模型，边框的大小将添加到框的宽度和高度。如果你使用的是替代盒模型，边框越大会使内容框越小，因为它会占用一些可用的宽度和高度。

#### 内边距

> 内边距位于边框和内容区域之间，用于将内容推离边框。与外边距不同，内边距不能为负数。任何应用于元素的背景都会显示在内边距后面。

## 层叠、优先级与继承

### 冲突规则

#### 层叠

> 样式表层叠——简单的说，就是 CSS 规则的顺序很重要；当应用两条同级别的规则到一个元素的时候，写在后面的就是实际使用的规则。

#### 优先级

> 浏览器是根据优先级来决定当多个规则有不同选择器对应相同的元素的时候需要使用哪个规则。它基本上是一个衡量选择器具体选择哪些区域的尺度：

- 一个元素选择器不是很具体，则会选择页面上该类型的所有元素，所以它的优先级就会低一些。

- 一个类选择器稍微具体点，则会选择该页面中有特定 class 属性值的元素，所以它的优先级就要高一点。

#### 继承

> 继承也需要在上下文中去理解。

## CSS 值和单位

### 什么是 CSS 的值？

> CSS 中的值类型是一种定义了一些可使用的值的集合的方式。

### 数字、长度和百分比

| 数值类型 | 描述 |
| :-: | :-: |
| `<integer>` | `<integer>` 是一个整数，比如 1024 或 -55。 |
| `<number>` | `<number>` 表示一个小数——它可能有小数点后面的部分，也可能没有，例如 0.255、128 或 -1.2。 |
| `<dimension>` | `<dimension>` 是一个 `<number>` 它有一个附加的单位，例如 45deg、5s 或 10px。`<dimension>` 是一个伞形类别，包括 `<length>`、`<angle>`、`<time>` 和 `<resolution>` 类型。 |
| `<percentage>` | `<percentage>` 表示一些其他值的一部分，例如 50%。百分比值总是相对于另一个量。例如，一个元素的长度相对于其父元素的长度。 |

#### 长度

> 最常见的数字类型是 `<length>`，例如 10px（像素）或 30em。CSS 中有两种类型的长度——相对长度和绝对长度。重要的是要知道它们之间的区别，以便理解他们控制的元素将变得有多大。

- 绝对长度单位

| 单位 | 名称 | 等价换算 |
| :-: | :-: | :-: |
| `cm` | 厘米 | 1cm = 37.8px = 25.2/64in |
| `mm` | 毫米 | 1mm = 1/10th of 1cm |
| `Q` | 四分之一毫米 | 1Q = 1/40th of 1cm |
| `in` | 英寸 | 1in = 2.54cm = 96px |
| `pc` | 派卡 | 1pc = 1/6th of 1in |
| `pt` | 磅 | 1pt = 1/72th of 1in |
| `px` | 像素 | 1px = 1/96th of 1in |

- 相对长度单位

  - `em` 相对于本元素的字体大小，或者在用于 font-size 时相对于父元素的字体大小。`rem` 相对于根元素的字体大小。

  - `vh` 和 `vw` 分别相对于视口的高度和宽度。

#### 百分比

> 在许多情况下，百分比与长度的处理方法是一样的。

#### 数字

> 有些值接受数字，不添加任何单位。

### 颜色

> 在 CSS 中指定颜色的方法有很多，其中一些是最近才实现的。在 CSS 中，相同的颜色值可以在任何地方使用，无论你指定的是文本颜色、背景颜色还是其他颜色。

#### 颜色关键词

> 一种指定颜色的简单易懂的方式。

#### 十六进制 RGB 值

> 每对值表示一个通道——红色、绿色和蓝色——并允许我们为每个通道指定 256 个可用值中的任意一个（16 x 16 = 256）。

#### RGB 和 RGBA 的值

> RGB 值是一个函数——`rgb()`——它有三个参数，表示颜色的红色、绿色和蓝色通道值，与十六进制值的方法非常相似。
>
> 你可以向 `rgb()` 传递第四个参数，它代表颜色的 alpha 通道，控制不透明度。如果你把这个值设置为 `0`，它将使颜色完全透明，而 `1` 将使它完全不透明。介于两者之间的值会给你带来不同级别的透明度。

**备注：** 在旧版本的 CSS 中，`rgb()` 语法不支持 alpha 参数——你需要使用另一个叫 `rgba()` 的函数来实现。如今，你可以向 `rgb()` 传递一个 alpha 参数，但为了向后兼容旧网站，`rgba()` 语法仍然被支持，并且具有与 `rgb()` 完全相同的行为。

#### HSL 和 HSLA 的值

> HSL 颜色模型。`hsl()` 函数不接受红、绿、蓝值，而是接受色相、饱和度和亮度值，这些值用于区分 1670 万种颜色，但方式不同：

- **色调**：颜色的底色。这个值在 0 和 360 之间，表示 color wheel 周围的角度。

- **饱和度**：颜色有多饱和？它的值为 0–100%，其中 0 为无颜色（它将显示为灰色阴影），100% 为全色饱和度

- **亮度**：颜色有多亮？它从 0–100% 中获取一个值，其中 0 表示没有光（它将完全显示为黑色），100% 表示完全亮（它将完全显示为白色）

**备注：** 在旧版本的 CSS 中，`hsl()` 语法不支持 alpha 参数——你需要使用一个叫做 `hsla()` 的不同函数来实现。现在你可以向 `hsl()` 传递一个 alpha 参数，但为了向后兼容老网站，`hsla()` 语法仍然被支持，并且具有与 `hsl()` 完全相同的行为。

### 图片

> `<image>` 数据类型用于图像为有效值的任何地方。它可以是一个通过 `url()` 函数指向的实际图像文件，也可以是一个渐变。

### 位置

> `<position>` 数据类型表示一组 2D 坐标，用于定位一个元素，如背景图像（通过 `background-position`）。它可以使用关键字（如 `top`、`left`、`bottom`、`right` 以及 `center`）将元素与 2D 框的特定边界对齐，以及表示框的顶部和左侧边缘偏移量的长度。

### 字符串和标识符

> 可以使用 CSS 中的字符串。

### 函数

> `calc()` 能够在 CSS 中进行简单的计算。

## 在 CSS 中调整大小

### 原始尺寸，或固有尺寸

> 在受 CSS 设置影响之前，HTML 元素有其原始的尺寸。

### 设置具体的尺寸

> 当给元素指定尺寸（然后其内容需要适合该尺寸）时，我们将其称为**外部尺寸**。

### min- 和 max- 尺寸

> 除了让万物都有一个确定的大小以外，我们可以让 CSS 给定一个元素的最大或最小尺寸。

### 视口单位

> 视口，即你在浏览器中看到的部分页面，也是有尺寸的。

## 背景与边框

### CSS 的背景样式

#### 背景颜色

> `background-color` 属性定义了 CSS 中任何元素的背景颜色。属性接受任何有效的 `<color>` 值。`background-color` 可以延伸至元素的内容和内边距盒子的下面。

#### 背景图像

> `background-image` 属性可以在一个元素的背景中显示一个图像。

- 控制背景平铺行为

- `background-repeat` 属性用于控制图像的平铺行为。可用的值是：

  - `no-repeat`——阻止背景重复平铺。

  - `repeat-x`——仅水平方向上重复平铺。

  - `repeat-y`——仅垂直方向上重复平铺。

  - `repeat`——默认值，在水平和垂直两个方向重复平铺。

- 调整背景图像的大小

    > 可以使用 `background-size` 属性，它可以设置长度或百分比值，来调整图像的大小以适应背景。
    >
    > 你也可以使用关键字：

  - `cover`：浏览器将使图像足够大，使它完全覆盖了盒子区域，同时仍然保持其宽高比。在这种情况下，图像的部分区域可能会跳出盒子外。
  - `contain`：浏览器会将图像调整到适合框内的尺寸。在这种情况下，如果图像的长宽比与盒子的长宽比不同，你可能会在图像的两边或顶部和底部出现空隙。

- 背景图像定位

    > `background-position` 属性允许你选择背景图片出现在它所应用的盒子上的位置。

#### 渐变背景

> 当渐变用于背景时，也可以使用像图像一样的 `background-image` 属性设置。

#### 多个背景图像

> 也可以有多个背景图像——在单个属性值中指定多个 `background-image` 值，用逗号分隔每个值。
>
> 当你这样做时，你可能会出现背景图片相互重叠的情况。背景将分层，最后列出的背景图片位于最下层，而之前的每张图片都堆在代码中紧随其后的那张图片之上。

#### 背景附加

> 我们为背景提供的另一个选项是指定内容滚动时的滚动方式。这是用 `background-attachment` 属性控制的，它可以取以下值：

- `scroll`：使元素的背景在页面滚动时滚动。如果滚动了元素内容，则背景不会移动。实际上，背景被固定在页面的相同位置，所以它会随着页面的滚动而滚动。

- `fixed`：使元素的背景固定在视口上，这样当页面或元素内容滚动时，它就不会滚动。它将始终保持在屏幕上相同的位置。

- `local`：将背景固定在它所设置的元素上，所以当你滚动该元素时，背景也随之滚动。

#### 背景的无障碍考虑

> 当你把文字放在背景图片或颜色上面时，你应该注意你有足够的对比度让文字对你的访客来说是清晰易读的。如果指定了一个图像，并且文本将被放置在该图像的顶部，你还应该指定一个 `background-color`，以便在图像未加载时文本也足够清晰。

### 设置边框

> 可以使用 `border` 为一个框的所有四条边设置边框。

#### 圆角

> 盒子上的圆角是通过使用 `border-radius` 属性和与盒子的每个角相关的普通属性来实现的。

## 溢出的内容

### 什么是溢出？

> 溢出是在你往盒子里面塞太多东西的时候发生的，所以盒子里面的东西也不会老老实实待着。

### CSS 尽力减少“数据损失”

> 只要有可能，CSS 就不会隐藏你的内容，隐藏引起的数据损失通常会造成困扰。

### overflow 属性

> `overflow` 属性是你控制一个元素溢出的方式，它告诉浏览器你想怎样处理溢出。`overflow` 的默认值为 `visible`，这就是我们的内容溢出的时候，我们在默认情况下看到它们的原因。
>
> 如果你想在内容溢出的时候把它裁剪掉，你可以在你的盒子上设置 `overflow: hidden`。这就会像它表面上所显示的那样作用——隐藏掉溢出。这可能会很自然地让东西消失掉，所以你只应该在判断隐藏内容不会引起问题的时候这样做。
>
> 如果你用了 `overflow: scroll`，那么你的浏览器总会显示滚动条，即使没有足够多引起溢出的内容。
>
> 如果你只是想让滚动条在有比盒子所能装下更多的内容的时候才显示，那么使用 `overflow: auto`。

## 图像、媒体和表单元素

### 替换元素

> 图像和视频被描述为**替换元素**。

### 调整图像大小

> `object-fit` 属性可以在这里帮助你。

### 布局中的替换元素

> 在对替换元素使用各种 CSS 布局时，你可能会发现他们的表现方式与其他元素有一些细节上的差异。

### form 元素

#### 样式化文本输入元素

> 应该谨慎改变表单样式，确保用户仍然能轻松辨认表单元素。
